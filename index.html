<!DOCTYPE html>
<html lang="en">
<head>
    <title>Dead forest burning</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--meta data for sharing links on Facebook-->
    <meta property="og:title" content="Dead forests burning"/>
    <!--<meta property="og:url" content=""/>-->
    <meta property="og:description" content="Practicing generating a story map."/>
    <meta property="og:image" content="img/social.png"/>

    <!--add required stylesheets-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
    <!--leaflet css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.12/css/all.css">

    <!--add favicon for the web page-->
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">


    <!--Fonts-->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">


    <link rel="stylesheet" type="text/css" href="css/storymap.2.4.css">
    <!--add required libraries-->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.js"></script>
    <!--jquery-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>

    <!--boostrap-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
    <!--leaflet.ajax for asynchronously adding geojson data-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>

    <!--story map plugin-->
    <script src="js/storymap.2.4.js"></script>



</head>
<body>

<div id="storymap" class="container-fluid">
    <div class="row">
        <div class="col-sm-6 col-md-4 storymap-story">
            <section data-scene="overview" data-background="assets/fieldphotos_video.mp4">
                <div class="fullscreen text-center">

                    <h1 class="display-4 d-flex justify-content-center">Small pests and big wildfire!</h1>


                    <small class="d-flex justify-content-center" style="color: rgba(255,255,255,0.95)">This story map
                        illustrates changes in forest structure
                        from mountain pine beetle outbreaks and wildfire.
                    </small>
                </div>
            </section>

            <section data-scene="lodgepole">
                <h2>Overview: Lodgpole Pine Forests</h2>
                <p>Forest across central interior British Columbia are dominated by Lodgepole pine. Forest in the region
                    are an in part of the landscape and provide wildlife habitat, carbon storage, economic value in
                    the form of timber harvest and recreation.
                </p>
                <p>These forests are in transition from broad scale disturbances. While lodgepole pine forests and
                    forests in the central interior are accustom to large scale disturbance events from mountain pine
                    beetle outbreaks and wildfire, recent events have been unprecedented in magnitude and extent. Beetle
                    outbreaks have occur multiple times throughout the last century, while wildfire return is typically
                    100-150 years in the region. </p>

                    <p>Both of these disturbances, beetle outbreak and wildfire, play integral roles in shaping forest
                        structure and function. Beetle outbreaks kill the canopy trees and release the understory.
                        Wildfire is an important mechanism for lodgepole pine regeneration. Lodgepole pine produce
                    serotinous cones that retain seeds past maturity awaiting an environmental cue, in this case heat
                    from fire, which melts the resinous bond and releases the seeds for germination.  </p>
            </section>

            <section data-scene="outbreak">
                <h2>Beetle Outbreak</h2>
                <p>Mountain pine beetles are a natural part of forest ecosystems in western North America. Lodgepole
                    pine trees are the primary host for mountain pine beetles. Warmer winters and and abundance of
                    mature lodgepole pine forests have created ideal conditions for the eruption in beetle populations
                    that have resulted millions of hectares of tree mortality. Much of the tree mortality has been
                    concentrated in central interior British Columbia. There are concerns that extensive landscapes of
                    dead trees will influence future wildfire. </p>
                <p>Female beetles find a suitable host tree and release a pheromone calling in other female beetles.
                    They attack the and overwhelm the tree defense mechanisms. The tree is unable to acquire the water
                    and nutrients it needs leading to its death. </p>
                <p>Trees transition through a series of decay phases as they succumb to death. The series of decay
                    phases changes the structure of the forest and the arrangement and continuity of fuels. In the green
                    attack phase, trees retain their green needles, but they have a lower moisture content. The red
                    phase follows and is characterized by red needles in the canopy. Finally the tree drops the red
                    needles and is not just a snag, which is referred to as the gray phase. </p>
            </section>

            <section data-scene="wildfire">
                <h2>Wildfire</h2>
                <p>Widlfire burns differently as it burns through dead forests. Wildfire consumes more wood on dead
                    snags as it moves through the forests. </p>
            </section>

            <section data-scene="double">
                <h2>Wildfire and Beetle Outbreak</h2>
                <p>When wildfire burns throught beetle killed forest the fuels structure is different then a live
                    forest. The snags that were once live trees are very dry and burn long then live trees leading
                    to more biomass consumption, extended periods of smoldering combustion.</p>
                <p>The lack of canopy fuels from needles being dropped after beetle kill means that snags will torch
                    and burn longer. Longer burning can consume or over head cones, which reduces the seed bank, which
                    can influence postfire regeneration.</p>
            </section>

            <section data-scene="regeneration">
                <h2>Forest Regeneration</h2>
                <p>Regeneration is critical to forest recovery.</p>
                <p>The extent and magnitude of both beetle outbreak and wildfire creates variability in seed
                    availability and regeneration response. This creates a diverse mosaic across the landscape.</p>
                <p>The mosaic includes everything from high density dog-hair stands of lodgepole pine to mostly postfire
                    herbacous plants like fireweed.</p>
            </section>



            <section data-scene="end" data-background="assets/fieldphotos_video.mp4">
                <div class="fullscreen text-center">
                    <h1 class="display-4 d-flex justify-content-center">Thanks for watching!!!</h1>
                    <small class="d-flex justify-content-center" style="color: rgba(255,255,255,0.95)">Big
                        thanks to all those that helped with this project.
                    </small>
                </div>
            </section>

        </div>
        <!--map div-->
        <div class="col-sm-6 col-md-8 storymap-map"></div>
    </div>

    <dl>
        <dt>
            <!--facebook icon-->
            <a class="fab fa-facebook-square btn"
               href="https://facebook.com/sharer.php?u=http://geoviz.ceoas.oregonstate.edu/storymap/examples/2.3/video.html"
               target="_blank"></a>
        </dt>
        <dt>
            <!--github icon-->
            <a class="fab fa-github btn" href="https://github.com/taluccia/geog4572.lab5.taluccia" style="top:40px"
               target="_blank"></a>
        </dt>
        <dt>
            <!--info icon-->
            <i class="fas fa-info-circle btn" style="top:60px" data-toggle="modal" data-target="#info-modal"></i>
        </dt>
    </dl>

    <!--the info page-->
    <div class="modal fade" id="info-modal" role="dialog">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">About</h4>
                </div>
                <div class="modal-body">
                    <p>This is a web map of lodgepole pine forest in transition. Forest in central interior have been
                        killed by mountain pine beetle outbreak and then burned during wildfire, which has raised
                        concerns and questions about fire severity and regeneration. This is practice demo for a class
                        lab: Geovisualization provided by Oregon State University. The story map library is derived from the
                        storymap plugin for leaflet at <a>http://atlefren.github.io/storymap/</a>, and its functionality
                        relies on both leaflet and Boostrap.</p>
                    <p><b>storymap.js</b> | Released Date: 02/20/2017 | Version: 2.1 | MIT License </p>
                    <p><b>Author: Anna Talucci</b> | College of Forestry | Oregon State University
                    </p>
                    <p>The context about forest and disturbance history is acquired from previous research.</p>
                    <p>The background video on the front page was generated from field photos. </p>
                    <p>The favicon image was acquired from <a>https://pngtree.com/freepng/green-flame_3478328.html.</a></p>
                    <p>This story map uses geospatial data from mapbox, Google Earth Engine, ESRI Map, Open Street Maps
                        and Data BC.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- main javascript -->
<script type="text/javascript">


    // Create Legend Contents in html format
    var beetle_legend = '<i style="background: orange; opacity: 0.5"></i><p><b>Beetle-Outbreak</b></p>';
    //var forest_legend = '<i style="background: green; opacity: 0.5"></i><p><b>Counties</b></p>';

    //["#440154","#45327f", "#365c8d", "#277f8e", "#1fa288", "#4ac26d", "9eda39"]; ' +
    //["Poplar", "Aspen", "Subalpine Fir", "Larch", "Lodgepole Pine", "White Spruce", "Spruce Hybrid"]
    // For each layer, the first variable is the layer, the second is the legend. The layer variable can be any kinds of layers that leaflet.js supports.
    // var layers = {
    //      layer1: {layer: layer1, legend: legend1},
    //      layer2: {layer: layer2, legend: legend2}
    //      ...
    // }

    var layers = {
        ESRI: {layer: L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}')},
        beetle: {
            layer: L.geoJson.ajax('assets/2002mpb.geojson', {
                color: 'orange',
                weight: 2,
                opacity: 0.3
            }), legend: beetle_legend
        },
        VIR: {
            layer: L.tileLayer('assets/tilesvir/{z}/{x}/{y}.png')

        },
        mpb: {
            layer: L.tileLayer('assets/tiles2002mpb/{z}/{x}/{y}.png')
         },
        burn: {
            layer: L.tileLayer('assets/tilesburn/{z}/{x}/{y}.png')
        },
        cartodb_light: {layer: L.tileLayer('http://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png')}
    };

    var scenes = {
        overview: {lat: 53.248971, lng: -125.644940, zoom: 7, name: 'Cover Page', layers: []},
        lodgepole: {lat: 53.267859, lng: -126.140204,  zoom: 13, name: 'Lodgepole Pine Forests', layers: [layers.VIR]},
        outbreak: {lat: 53.269461, lng: -125.863468, zoom: 10, name: 'Beetle Outbreak', layers: [layers.beetle]},
        wildfire: {lat: 53.267859, lng: -126.140204, zoom: 12, name: 'Wildfire', layers: [layers.burn]},
        regeneration: {lat: 53.248971, lng: -125.644940, zoom: 8, name: 'Forest Regeneration', layers: [layers.ESRI]},
        end: {lat: 53.248971, lng: -125.644940, zoom: 7, name: 'The End', layers: [layers.ESRI]}
    };

    $('#storymap').storymap({
        scenes: scenes,
        baselayer: layers.cartodb_light,
        legend: true, // if you do not want a legend feature, you can simply not define the createLegend function.
        credits: "",
        loader: true,
        scalebar: false,
        flyo: true,
        navwidget: true,

        createMap: function () {
            // create a map in the "map" div, set the view to a given place and zoom
            var map = L.map($(".storymap-map")[0], {
                zoomControl: false, scrollWheelZoom: false, fadeAnimation: true,
                zoomAnimation: true
            }).setView([53, -125.5], 7);

            return map;
        }
    });
</script>
</body>
</html>s