<!DOCTYPE html>
<html lang="en">
<head>
    <title>Dead forest burning</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--meta data for sharing links on Facebook-->
    <meta property="og:title" content="The major cities in Oregon"/>
    <meta property="og:url" content="http://geoviz.ceoas.oregonstate.edu/storymap/examples/2.4/video.html"/>
    <meta property="og:description" content="This is an example of a storymap."/>
    <meta property="og:image" content="img/social.png"/>

    <!--add required stylesheets-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
    <!--leaflet css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.12/css/all.css">

    <!--add favicon for the web page-->
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">


    <!--Fonts-->
    <link href="https://fonts.googleapis.com/css?family=Cairo" rel="stylesheet">


    <link rel="stylesheet" type="text/css" href="css/storymap.2.4.css">
    <!--add required libraries-->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.js"></script>
    <!--jquery-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>

    <!--boostrap-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
    <!--leaflet.ajax for asynchronously adding geojson data-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>

    <!--story map plugin-->
    <script src="js/storymap.2.4.js"></script>



</head>
<body>

<div id="storymap" class="container-fluid">
    <div class="row">
        <div class="col-sm-6 col-md-4 storymap-story">
            <section data-scene="overview" data-background="assets/fieldphotos_video.mp4">
                <div class="fullscreen text-center">

                    <h1 class="display-4 d-flex justify-content-center">Small pests and big wildfire!</h1>


                    <small class="d-flex justify-content-center" style="color: rgba(255,255,255,0.95)">This story map
                        illustrates changes in forest structure
                        from mountain pine beetle outbreaks and wildfire.
                    </small>
                </div>
            </section>

            <section data-scene="lodgepole">
                <h2>Lodgpole Pine Forests</h2>
                <p>Lodgepole pine is a dominant canopy tree species in forest across central interior British Columbia.
                    It is accustom to large scale disturbance events from mountain pine beetle outbreaks and wildfire.
                    Beetle outbreaks have been known to occur multiple times throughout the last centrury, while wildfire
                    return is 100-150 years in the region. Wildfire is an important mechanism for lodgepole pine
                    regeneration. Lodgepole pine produce serotinous cones that retain seed past maturity awaiting an
                    environmental cue, in the is case heat from fire, which melts the resinous bond and releases the
                    seeds for germination.  </p>
            </section>

            <section data-scene="outbreak">
                <h2>Beetle Outbreak</h2>
                <p>Mountain pine beetles are a natural part of forest ecosystems in western North America. Lodgepole
                    pine trees are the primary host for mountain pine beetles. Warmer winters and and abundance of
                    mature lodgepole pine forests have created ideal conditions for the eruption in beetle populations
                    that have resulted millions of hectares of tree mortality. Much of the tree mortality has been
                    concentrated in central interior British Columbia. There are concerns that extensive landscapes of
                    dead trees will influence future wildfire. </p>
                <p>Female beetles find a suitable host tree and release a pheromone calling in other female beetles.
                    They attack the and overwhelm the tree defense mechanisms. The tree is unable to acquire the water
                    and nutrients it needs leading to its death. </p>
                <p>Trees transition through a series of decay phases as they succumb to death. The series of decay
                    phases changes the structure of the forest and the arrangement and continuity of fuels. In the green
                    attack phase, trees retain their green needles, but they have a lower moisture content. The red
                    phase follows and is characterized by red needles in the canopy. Finally the tree drops the red
                    needles and is not just a snag, which is referred to as the gray phase. </p>
            </section>

            <section data-scene="wildfire">
                <h2>Wildfire</h2>
                <p>Widlfire burns differently as it burns through dead forests. Wildfrie consumes more wood on dead
                    snags as it moves through the forests. </p>
            </section>

            <section data-scene="regeneration">
                <h2>Forest Regeneration</h2>
                <p>Eugene is a city of the Pacific Northwest located in the U.S. state of Oregon. It is located at the
                    southern end of the Willamette Valley, near the confluence of the McKenzie and Willamette Rivers,
                    about 50 miles (80 km) east of the Oregon Coast.</p>
                <p>As of the 2010 census, Eugene had a population of 156,185; it is the second most populous city in the
                    state (after Portland) and the county seat of Lane County. The Eugene-Springfield, Oregon
                    metropolitan statistical area (MSA) is the 146th largest metropolitan statistical area in the US and
                    the third-largest in the state, behind the Portland Metropolitan Area and the Salem Metropolitan
                    Area. The city's population for 2014 was estimated to be 160,561 by the US Census.</p>
                <p>Eugene is home to the University of Oregon and Lane Community College. The city is also noted for its
                    natural beauty, recreational opportunities (especially bicycling, running/jogging, rafting, and
                    kayaking), and focus on the arts. Eugene's official slogan is "A Great City for the Arts and
                    Outdoors". It is also referred to as the "Emerald City" and as "Track Town, USA". The Nike
                    corporation had its beginnings in Eugene. In 2021, the city will host the 18th Track and Field World
                    Championships.</p>
            </section>


            <section data-scene="bend">
                <h2>Bend</h2>
                <p>Bend is a city in, and the county seat of Deschutes County, Oregon, United States. It is the
                    principal city of the Bend, Oregon Metropolitan Statistical Area. Bend is Central Oregon's largest
                    city, and despite its modest size, is the de facto metropolis of the region, owing to the low
                    population density of that area. Bend recorded a population of 76,693 at the time of the 2010 U.S.
                    Census, up from 52,029 at the 2000 census. The estimated population of the city as of 2013 is
                    81,236. Bend's metro population was estimated at 165,954 as of July 1, 2013. The Bend MSA is the
                    fifth largest metropolitan area in Oregon.</p>
                <p>Bend is located on the eastern edge of the Cascade Range along the Deschutes River. Here the
                    Ponderosa Pine forest transitions into the high desert, characterized by arid land, junipers,
                    sagebrush, and bitter-brush. Originally a crossing point on the river, settlement began in the early
                    1900s. Bend was incorporated as a city in 1905. Economically, it started as a logging town but is
                    now identified as a gateway for many outdoor sports, including mountain biking, fishing, hiking,
                    camping, rock climbing, white-water rafting, skiing, paragliding and golf. In 2015, Men's Journal
                    ranked Bend as one of The 10 Best Places to Live Now.</p>
            </section>

            <section data-scene="oregon">
                <h2>Oregon</h2>
                <p>Oregon was inhabited by many indigenous tribes before Western traders, explorers, and settlers
                    arrived. An autonomous government was formed in the Oregon Country in 1843 before the Oregon
                    Territory was created in 1848. Oregon became the 33rd state on February 14, 1859. Today, at 98,000
                    square miles (255,000 kmÂ²), Oregon is the ninth largest and, with a population of 4 million, 27th
                    most populous U.S. state. The capital of Oregon is Salem, the second most populous of its cities,
                    with 164,549 residents. Portland is Oregon's most populous city, with 632,309 residents, and ranks
                    as the 26th most populous city in the United States. Portland's metro population of 2,389,228 ranks
                    the 23rd largest metro in the nation. The Willamette Valley in western Oregon is the state's most
                    densely populated area, home to eight of the ten most populous cities.</p>
                <img src="img/oregon_flag.png" class="img-responsive img-thumbnail" alt="responsive image"
                     alt-text="the flag of oregon">
                <p>Oregon's landscape is diverse, with a windswept Pacific coastline; a volcano-studded Cascade Range;
                    abundant bodies of water in and west of the Cascades; dense evergreen, mixed, and deciduous forests
                    at lower elevations; and a high desert sprawling across much of its east all the way to the Great
                    Basin.</p>
            </section>

            <section data-scene="end" data-background="images/IMG_0850.jpg">
                <div class="fullscreen text-center">
                    <h1 class="display-4 d-flex justify-content-center">Thanks for watching!!!</h1>
                    <small class="d-flex justify-content-center" style="color: rgba(255,255,255,0.95)">Your
                        Acknowledgement goes here
                    </small>
                </div>
            </section>

        </div>
        <!--map div-->
        <div class="col-sm-6 col-md-8 storymap-map"></div>
    </div>

    <dl>
        <dt>
            <!--facebook icon-->
            <a class="fab fa-facebook-square btn"
               href="https://facebook.com/sharer.php?u=http://geoviz.ceoas.oregonstate.edu/storymap/examples/2.3/video.html"
               target="_blank"></a>
        </dt>
        <dt>
            <!--facebook icon-->
            <a class="fab fa-github btn" href="https://github.com/jakobzhao/storymap" style="top:40px"
               target="_blank"></a>
        </dt>
        <dt>
            <!--info icon-->
            <i class="fas fa-info-circle btn" style="top:60px" data-toggle="modal" data-target="#info-modal"></i>
        </dt>
    </dl>

    <!--the info page-->
    <div class="modal fade" id="info-modal" role="dialog">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">About</h4>
                </div>
                <div class="modal-body">
                    <p>This is a web map of major cities in Oregon. It is mainly made as a demo for a course GEOG 371:
                        Web Mapping provided by Oregon State University. The story map library is derived from the
                        storymap plugin for leaflet at <a>http://atlefren.github.io/storymap/</a>, and its functionality
                        relies on both leaflet and Boostrap.</p>
                    <p><b>storymap.js</b> | Released Date: 02/20/2017 | Version: 2.1 | MIT License </p>
                    <p><b>Author: Bo Zhao</b> | College of Earth, Ocean, Atmospheric Science | Oregon State University
                    </p>
                    <p>The context about Oregon cities was collected from Wikipedia.</p>
                    <p>The <a href="https://www.youtube.com/watch?v=UJ_vQC9PNY4">background video</a> on the front page
                        was clipped from Youtube. </p>
                    <p>The favicon image was acquired from <a>http://www.udlcenter.org/advocacy/state/oregon.</a></p>
                    <p>This story map uses geospatial data from mapbox, Google Earth Engine, ESRI Map, Open Street Maps
                        and Oregon Explorer.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- main javascript -->
<script type="text/javascript">


    // Create Legend Contents in html format
    var county_legend = '<i style="background: orange; opacity: 0.5"></i><p><b>Counties</b></p>';
    var forest_legend = '<i style="background: green; opacity: 0.5"></i><p><b>Counties</b></p>';

    //["#440154","#45327f", "#365c8d", "#277f8e", "#1fa288", "#4ac26d", "9eda39"]; ' +
    //["Poplar", "Aspen", "Subalpine Fir", "Larch", "Lodgepole Pine", "White Spruce", "Spruce Hybrid"]
    // For each layer, the first variable is the layer, the second is the legend. The layer variable can be any kinds of layers that leaflet.js supports.
    // var layers = {
    //      layer1: {layer: layer1, legend: legend1},
    //      layer2: {layer: layer2, legend: legend2}
    //      ...
    // }

    var layers = {
        ESRI: {layer: L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}')},
        counties: {
            layer: L.geoJson.ajax('assets/counties.geojson', {
                color: 'orange',
                weight: 2,
                opacity: 0.3
            }), legend: county_legend
        },
        VIR: {
            layer: L.tileLayer('assets/tilesvir/{z}/{x}/{y}.png'),
            legend: forest_legend
        },
        satellite: {
            layer: L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiamFrb2J6aGFvIiwiYSI6ImNpcms2YWsyMzAwMmtmbG5icTFxZ3ZkdncifQ.P9MBej1xacybKcDN_jehvw', {
                id: 'mapbox.satellite'
            })
        },
        Burn: {
            layer: L.tileLayer('assets/tilesburn/{z}/{x}/{y}.png')
        },
        cartodb_light: {layer: L.tileLayer('http://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png')}
    };

    var scenes = {
        overview: {lat: 53.248971, lng: -125.644940, zoom: 7, name: 'Cover Page', layers: []},
        lodgepole: {lat: 53.267859, lng: -126.140204,  zoom: 13, name: 'Lodgepole Pine Forests', layers: [layers.VIR]},
        outbreak: {lat: 53.273888, lng: -126.114708,  zoom: 11, name: 'Beetle Outbreak', layers: [layers.VIR]},
        wildfire: {lat: 53.267859, lng: -126.140204, zoom: 12, name: 'Wildfire', layers: [layers.Burn]},
        regeneration: {lat: 53.248971, lng: -125.644940, zoom: 8, name: 'Forest Regeneration', layers: []},
        end: {lat: 53.248971, lng: -125.644940, zoom: 7, name: 'The End'}
    };

    $('#storymap').storymap({
        scenes: scenes,
        baselayer: layers.cartodb_light,
        legend: true, // if you do not want a legend feature, you can simply not define the createLegend function.
        credits: "",
        loader: true,
        scalebar: false,
        flyo: true,
        navwidget: true,

        createMap: function () {
            // create a map in the "map" div, set the view to a given place and zoom
            var map = L.map($(".storymap-map")[0], {
                zoomControl: false, scrollWheelZoom: false, fadeAnimation: true,
                zoomAnimation: true
            }).setView([44, -120], 7);

            return map;
        }
    });
</script>
</body>
</html>s